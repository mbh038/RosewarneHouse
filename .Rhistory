png("./figures/heatflux_U4preRetrofit.png",width=595,height=642)
plot(t[index]/1440,Qexp[index],
type="l",
ylim=c(0,3),
xlab="Time (days)",
ylab="Heat flux Q (W/m^2)",
col=COL[1])
lines(t[index]/1440,Q[index],
col=COL[2])
legend("topright",
c("Measured", "Predicted"),
lwd=2,
col=c(COL[1], COL[2])
)
text(3,0,"Unit 4 (A), R = 2.96",pos=4)
dev.off()
png("./figures/temperatures_U4preRetrofit.png",width=595,height=642)
plot(days[index],tin[index],
type="l",
col=COL[4],
ylim=c(5,15),
xlab="Time (days)",
ylab="Temperature (deg celsius)")
lines(days[index],tout[index],col=COL[1])
legend("topright",
c("Interior wall surface", "Exterior wall surface"),
lwd=2,
col=c(COL[4], COL[1])
)
text(0,0,"Unit 4 (A)",pos=4)
dev.off()
library(rafalib)
library(openintro)
data(COL)
mypar(1,1)
days<-seq(1,nrow(u4p))/1440
png("./figures/temperatures_U4preRetrofit.png",width=595,height=642)
plot(days[index],tin[index],
type="l",
col=COL[4],
ylim=c(5,15),
xlab="Time (days)",
ylab="Temperature (deg celsius)")
lines(days[index],tout[index],col=COL[1])
legend("topright",
c("Interior wall surface", "Exterior wall surface"),
lwd=2,
col=c(COL[4], COL[1])
)
text(5,0,"Unit 4 (A)",pos=4)
dev.off()
library(rafalib)
library(openintro)
data(COL)
mypar(1,1)
days<-seq(1,nrow(u4p))/1440
png("./figures/temperatures_U4preRetrofit.png",width=595,height=642)
plot(days[index],tin[index],
type="l",
col=COL[4],
ylim=c(5,15),
xlab="Time (days)",
ylab="Temperature (deg celsius)")
lines(days[index],tout[index],col=COL[1])
legend("topright",
c("Interior wall surface", "Exterior wall surface"),
lwd=2,
col=c(COL[4], COL[1])
)
text(0,5,"Unit 4 (A)",pos=4)
dev.off()
library(rafalib)
library(openintro)
data(COL)
mypar(1,1)
days<-seq(1,nrow(u4p))/1440
png("./figures/temperatures_U4preRetrofit.png",width=595,height=642)
plot(days[index],tin[index],
type="l",
col=COL[4],
ylim=c(5,15),
xlab="Time (days)",
ylab="Temperature (deg celsius)")
lines(days[index],tout[index],col=COL[1])
legend("topright",
c("Interior wall surface", "Exterior wall surface"),
lwd=2,
col=c(COL[4], COL[1])
)
text(0,5,"Unit 4 (A) (no insulation)",pos=4)
dev.off()
1/1.314
png("./figures/heatflux_U4preRetrofit.png",width=595,height=642)
plot(t[index]/1440,Qexp[index],
type="l",
ylim=c(0,10),
xlab="Time (days)",
ylab="Heat flux Q (W/m^2)",
col=COL[1])
lines(t[index]/1440,Q[index],
col=COL[2])
legend("topright",
c("Measured", "Predicted"),
lwd=2,
col=c(COL[1], COL[2])
)
text(0,0,"Unit 4 (A) pre-insulation, R = 0.76",pos=4)
dev.off()
Qexp<--u4p$hp2flux2[index]+15
Tint<-tin[index]
Text<-tout[index]
t=u4p$id[index]
Tm=numeric()
Q=numeric()
mypar(1,1)
R1=.55 # celotex
R2=0.22 # as per unit 1, stone wall
C=1364
Tm_init=5.65
tau=60
Qt<-function(R1,R2,Tm_init,C){
Tm[1]=Tm_init
for (i in 1:length(t)){
dt=60*(t[i+1]-t[i])
Q[i]=(Tint[i]-Tm[i])/R1
Tm[i+1]=((Tint[i+1]/R1)+(Text[i+1]/R2)+C*Tm[i]/dt)/(1/R1 + 1/R2 + C/dt)
}
Q
}
Q<-Qt(R1,R2,Tm_init,C)
#Qexp<-Qexp[-1]
Qexp<-Qexp+mean(Q-Qexp)
png("./figures/heatflux_U4preRetrofit.png",width=595,height=642)
plot(t[index]/1440,Qexp[index],
type="l",
ylim=c(0,10),
xlab="Time (days)",
ylab="Heat flux Q (W/m^2)",
col=COL[1])
lines(t[index]/1440,Q[index],
col=COL[2])
legend("topright",
c("Measured", "Predicted"),
lwd=2,
col=c(COL[1], COL[2])
)
text(0,0,"Unit 4 (A) pre-insulation, R = 0.76",pos=4)
dev.off()
png("./figures/heatflux_U4preRetrofit.png",width=595,height=642)
plot(t[index]/1440,Qexp[index],
type="l",
ylim=c(0,8),
xlab="Time (days)",
ylab="Heat flux Q (W/m^2)",
col=COL[1])
lines(t[index]/1440,Q[index],
col=COL[2])
legend("topright",
c("Measured", "Predicted"),
lwd=2,
col=c(COL[1], COL[2])
)
text(0,0,"Unit 4 (A) pre-insulation, R = 0.76",pos=4)
dev.off()
png("./figures/heatflux_U4preRetrofit.png",width=595,height=642)
plot(t[index]/1440,Qexp[index],
type="l",
xlim=c(0,3),
ylim=c(0,8),
xlab="Time (days)",
ylab="Heat flux Q (W/m^2)",
col=COL[1])
lines(t[index]/1440,Q[index],
col=COL[2])
legend("topright",
c("Measured", "Predicted"),
lwd=2,
col=c(COL[1], COL[2])
)
text(0,0,"Unit 4 (A) pre-insulation, R = 0.76",pos=4)
dev.off()
png("./figures/heatflux_U4preRetrofit.png",width=595,height=642)
plot(t[index]/1440,Qexp[index],
type="l",
xlim=c(0,3.5),
ylim=c(0,8),
xlab="Time (days)",
ylab="Heat flux Q (W/m^2)",
col=COL[1])
lines(t[index]/1440,Q[index],
col=COL[2])
legend("topright",
c("Measured", "Predicted"),
lwd=2,
col=c(COL[1], COL[2])
)
text(0,0,"Unit 4 (A) pre-insulation, R = 0.76",pos=4)
dev.off()
png("./figures/heatflux_U4preRetrofit.png",width=595,height=642)
plot(t[index]/1440,Qexp[index],
type="l",
xlim=c(0,3.5),
ylim=c(0,8),
xlab="Time (days)",
ylab=parse(text="Heat flux Q (W/m^2)"),#parse(text='70^o*N')
col=COL[1])
lines(t[index]/1440,Q[index],
col=COL[2])
legend("topright",
c("Measured", "Predicted"),
lwd=2,
col=c(COL[1], COL[2])
)
text(0,0,"Unit 4 (A) pre-insulation, R = 0.76",pos=4)
dev.off()
png("./figures/heatflux_U4preRetrofit.png",width=595,height=642)
plot(t[index]/1440,Qexp[index],
type="l",
xlim=c(0,3.5),
ylim=c(0,8),
xlab="Time (days)",
ylab=parse(text='Heat flux Q (W/m^2)'),#parse(text='70^o*N')
col=COL[1])
lines(t[index]/1440,Q[index],
col=COL[2])
legend("topright",
c("Measured", "Predicted"),
lwd=2,
col=c(COL[1], COL[2])
)
text(0,0,"Unit 4 (A) pre-insulation, R = 0.76",pos=4)
dev.off()
png("./figures/heatflux_U4preRetrofit.png",width=595,height=642)
plot(t[index]/1440,Qexp[index],
type="l",
xlim=c(0,3.5),
ylim=c(0,8),
xlab="Time (days)",
ylab=paste0("Heat flux Q (W/",parse(text='m^*2)')),#parse(text='70^o*N')
col=COL[1])
lines(t[index]/1440,Q[index],
col=COL[2])
legend("topright",
c("Measured", "Predicted"),
lwd=2,
col=c(COL[1], COL[2])
)
text(0,0,"Unit 4 (A) pre-insulation, R = 0.76",pos=4)
dev.off()
png("./figures/heatflux_U4preRetrofit.png",width=595,height=642)
plot(t[index]/1440,Qexp[index],
type="l",
xlim=c(0,3.5),
ylim=c(0,8),
xlab="Time (days)",
ylab=parese(text=paste0("Heat Flux W/m","^2","*)")),
col=COL[1])
lines(t[index]/1440,Q[index],
col=COL[2])
legend("topright",
c("Measured", "Predicted"),
lwd=2,
col=c(COL[1], COL[2])
)
text(0,0,"Unit 4 (A) pre-insulation, R = 0.76",pos=4)
dev.off()
png("./figures/heatflux_U4preRetrofit.png",width=595,height=642)
plot(t[index]/1440,Qexp[index],
type="l",
xlim=c(0,3.5),
ylim=c(0,8),
xlab="Time (days)",
ylab=parse(text=paste0("Heat Flux W/m","^2","*)")),
col=COL[1])
lines(t[index]/1440,Q[index],
col=COL[2])
legend("topright",
c("Measured", "Predicted"),
lwd=2,
col=c(COL[1], COL[2])
)
text(0,0,"Unit 4 (A) pre-insulation, R = 0.76",pos=4)
dev.off()
png("./figures/heatflux_U4preRetrofit.png",width=595,height=642)
plot(t[index]/1440,Qexp[index],
type="l",
xlim=c(0,3.5),
ylim=c(0,8),
xlab="Time (days)",
ylab=parse(text=paste0("Heat Flux W/m","^2")),
col=COL[1])
lines(t[index]/1440,Q[index],
col=COL[2])
legend("topright",
c("Measured", "Predicted"),
lwd=2,
col=c(COL[1], COL[2])
)
text(0,0,"Unit 4 (A) pre-insulation, R = 0.76",pos=4)
dev.off()
ylab=expression(paste('(SOC[',kgm^-2,'])'^0.25,sep='')))
png("./figures/heatflux_U4preRetrofit.png",width=595,height=642)
plot(t[index]/1440,Qexp[index],
type="l",
xlim=c(0,3.5),
ylim=c(0,8),
xlab="Time (days)",
#ylab=parse(text=paste0("Heat Flux W/m","^2")),
ylab=expression(paste('(SOC[',kgm^-2,'])'^0.25,sep='')),
col=COL[1])
lines(t[index]/1440,Q[index],
col=COL[2])
legend("topright",
c("Measured", "Predicted"),
lwd=2,
col=c(COL[1], COL[2])
)
text(0,0,"Unit 4 (A) pre-insulation, R = 0.76",pos=4)
dev.off()
png("./figures/heatflux_U4preRetrofit.png",width=595,height=642)
plot(t[index]/1440,Qexp[index],
type="l",
xlim=c(0,3.5),
ylim=c(0,8),
xlab="Time (days)",
#ylab=parse(text=paste0("Heat Flux W/m","^2")),
ylab=expression(paste('Heat Flux W/',m^-2,')',sep='')),
col=COL[1])
lines(t[index]/1440,Q[index],
col=COL[2])
legend("topright",
c("Measured", "Predicted"),
lwd=2,
col=c(COL[1], COL[2])
)
text(0,0,"Unit 4 (A) pre-insulation, R = 0.76",pos=4)
dev.off()
png("./figures/heatflux_U4preRetrofit.png",width=595,height=642)
plot(t[index]/1440,Qexp[index],
type="l",
xlim=c(0,3.5),
ylim=c(0,8),
xlab="Time (days)",
#ylab=parse(text=paste0("Heat Flux W/m","^2")),
ylab=expression(paste('Heat Flux (W/',m^2,')',sep='')),
col=COL[1])
lines(t[index]/1440,Q[index],
col=COL[2])
legend("topright",
c("Measured", "Predicted"),
lwd=2,
col=c(COL[1], COL[2])
)
text(0,0,"Unit 4 (A) pre-insulation, R = 0.76",pos=4)
dev.off()
source('C:/Users/Mike/Rspace/RosewarneHouse/PlotRHFigures.r', echo=TRUE)
# Plot Rosewarne House figures
# Hukseflux heat Flux Meter
rhfm=0.00625 # W/m2
# amplifier functions
ampch1<-function(vout){
0.012 * vout - 0.094 #cal 5-02-16 alice & mike
}
ampch2<-function(vout){
0.0118 * vout - 0.5235 #cal 5-02-16 alice & mike
}
# read in Unit 1 data
u1<-read.csv("18-03-to-15-04 unit1.prn",sep="\t",stringsAsFactors=FALSE)
id<-seq(1,nrow(u1))
u1<-cbind(id,u1)
names(u1)<-c("id","date","time","T1","T2","T3","T4","hp1","hp2")
library(TTR)
library(rafalib)
library(openintro)
data(COL)
mypar(1,1)
# plot(u1$T2,type="l",col=COL[1]) # outside
# lines(u1$T4,col=COL[2]) # outside
# lines(u1$T1,col=COL[3]) # inside
# lines(u1$T3,col=COL[4]) # inside
tin<-(u1$T1+u1$T3)/2
tin<-SMA(tin,5)
tout<-(u1$T2+u1$T4)/2
tout<-SMA(tout,5)
days<-seq(1,nrow(u1))/1440
png("./figures/temperatures_U1.png",width=595,height=642)
plot(days,tin,
type="l",
col=COL[4],
ylim=c(0,30),
xlab="Time (days)",
ylab=expression(paste('Temperature (',^o,'C)',sep=''))#expression(paste('Temperature (',^o,'C)',sep=''))
lines(days,tout,col=COL[1])
legend("topright",
c("Interior wall surface", "Exterior wall surface"),
lwd=2,
col=c(COL[4], COL[1])
)
text(0,0,"Unit 1 (D)",pos=4)
dev.off()
png("./figures/temperatures_U1.png",width=595,height=642)
plot(days,tin,
type="l",
col=COL[4],
ylim=c(0,30),
xlab="Time (days)",
ylab=expression(paste('Temperature (','^o','C)',sep=''))#expression(paste('Temperature (',^o,'C)',sep=''))
)
lines(days,tout,col=COL[1])
legend("topright",
c("Interior wall surface", "Exterior wall surface"),
lwd=2,
col=c(COL[4], COL[1])
)
text(0,0,"Unit 1 (D)",pos=4)
dev.off()
png("./figures/temperatures_U1.png",width=595,height=642)
plot(days,tin,
type="l",
col=COL[4],
ylim=c(0,30),
xlab="Time (days)",
ylab=expression('Temperature (','^o','C)',sep='')#expression(paste('Temperature (',^o,'C)',sep=''))
)
lines(days,tout,col=COL[1])
legend("topright",
c("Interior wall surface", "Exterior wall surface"),
lwd=2,
col=c(COL[4], COL[1])
)
text(0,0,"Unit 1 (D)",pos=4)
dev.off()
png("./figures/temperatures_U1.png",width=595,height=642)
plot(days,tin,
type="l",
col=COL[4],
ylim=c(0,30),
xlab="Time (days)",
ylab=text(expression(2^o))#expression(paste('Temperature (',^o,'C)',sep=''))
)
lines(days,tout,col=COL[1])
legend("topright",
c("Interior wall surface", "Exterior wall surface"),
lwd=2,
col=c(COL[4], COL[1])
)
text(0,0,"Unit 1 (D)",pos=4)
dev.off()
plot(days,tin,
type="l",
col=COL[4],
ylim=c(0,30),
xlab="Time (days)",
ylab=expression(2^o)#expression(paste('Temperature (',^o,'C)',sep=''))
)
lines(days,tout,col=COL[1])
legend("topright",
c("Interior wall surface", "Exterior wall surface"),
lwd=2,
col=c(COL[4], COL[1])
)
text(0,0,"Unit 1 (D)",pos=4)
dev.off()
png("./figures/temperatures_U1.png",width=595,height=642)
plot(days,tin,
type="l",
col=COL[4],
ylim=c(0,30),
xlab="Time (days)",
ylab=expression(2^o)#expression(paste('Temperature (',^o,'C)',sep=''))
)
lines(days,tout,col=COL[1])
legend("topright",
c("Interior wall surface", "Exterior wall surface"),
lwd=2,
col=c(COL[4], COL[1])
)
text(0,0,"Unit 1 (D)",pos=4)
dev.off()
png("./figures/temperatures_U1.png",width=595,height=642)
plot(days,tin,
type="l",
col=COL[4],
ylim=c(0,30),
xlab="Time (days)",
ylab=paste0("Temperature ",expression(""^o),"C")#expression(paste('Temperature (',^o,'C)',sep=''))
)
lines(days,tout,col=COL[1])
legend("topright",
c("Interior wall surface", "Exterior wall surface"),
lwd=2,
col=c(COL[4], COL[1])
)
text(0,0,"Unit 1 (D)",pos=4)
dev.off()
png("./figures/temperatures_U1.png",width=595,height=642)
plot(days,tin,
type="l",
col=COL[4],
ylim=c(0,30),
xlab="Time (days)",
ylab=expression(paste("Temperature "^"o","C"))#expression(paste('Temperature (',^o,'C)',sep=''))
)
lines(days,tout,col=COL[1])
legend("topright",
c("Interior wall surface", "Exterior wall surface"),
lwd=2,
col=c(COL[4], COL[1])
)
text(0,0,"Unit 1 (D)",pos=4)
dev.off()
source('C:/Users/Mike/Rspace/RosewarneHouse/PlotRHFigures.r', echo=TRUE)
